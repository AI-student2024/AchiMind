let u=!1,t=null;async function v(r=!1,o=null){console.log("Initializing overview page",r?"(project change)":"");try{const e=document.querySelector(".export-report");e&&!r&&e.addEventListener("click",()=>{console.log("Export report clicked")});const n=document.querySelector(".update-knowledge");n&&!r&&n.addEventListener("click",()=>{console.log("Update knowledge clicked")}),await p(o),r||f(),u=!0,console.log("Overview page initialization completed")}catch(e){throw console.error("Error initializing overview page:",e),e}}async function p(r=null){console.log("Initializing knowledge graph preview");try{const o=document.querySelector(".knowledge-graph-preview");if(!o){console.error("Knowledge graph container not found");return}if(console.log("Found graph container:",o),typeof vis>"u"){console.error("vis.js is not loaded");return}console.log("vis.js is loaded"),t&&(t.destroy(),t=null),o.style.border="1px solid #ddd",o.style.backgroundColor="#ffffff";const e=localStorage.getItem("selectedProject")||"上海金融中心智能化项目";console.log("Selected project:",e);const n=b(e),l=w(e);console.log("Node data:",n),console.log("Edge data:",l);const i=new vis.DataSet(n),d=new vis.DataSet(l),a={nodes:{shape:"dot",size:30,font:{size:16,color:"#333",face:"Arial"},borderWidth:2,shadow:!0,color:{border:"#2B7CE9",background:"#97C2FC"}},edges:{width:2,color:{color:"#848484",highlight:"#848484",hover:"#848484"},arrows:{to:{enabled:!0,scaleFactor:.5}},smooth:{type:"continuous"}},physics:{enabled:!0,barnesHut:{gravitationalConstant:-2e3,centralGravity:.3,springLength:200,springConstant:.04,damping:.09},stabilization:{enabled:!0,iterations:1e3,updateInterval:100}},interaction:{hover:!0,tooltipDelay:200,zoomView:!0,dragView:!0},layout:{randomSeed:2}};console.log("Creating network with options:",a),t=new vis.Network(o,{nodes:i,edges:d},a),t.once("stabilizationIterationsDone",()=>{console.log("Knowledge graph stabilized"),t.fit()}),t.on("click",function(c){if(c.nodes.length>0){const s=c.nodes[0],g=i.get(s);console.log("Clicked node:",g)}}),console.log("Knowledge graph preview initialization completed")}catch(o){throw console.error("Error initializing knowledge graph preview:",o),o}}function b(r){const o={上海金融中心智能化项目:[{id:1,label:"BA系统",group:"system",color:{background:"#97C2FC",border:"#2B7CE9"}},{id:2,label:"DDC控制器",group:"device",color:{background:"#FFB1B1",border:"#E04141"}},{id:3,label:"操作手册",group:"document",color:{background:"#B1FFB1",border:"#41E041"}},{id:4,label:"温度传感器",group:"device",color:{background:"#FFB1B1",border:"#E04141"}},{id:5,label:"照明控制",group:"system",color:{background:"#97C2FC",border:"#2B7CE9"}}],北京中心大厦智能化项目:[{id:1,label:"安防系统",group:"system",color:{background:"#97C2FC",border:"#2B7CE9"}},{id:2,label:"监控设备",group:"device",color:{background:"#FFB1B1",border:"#E04141"}},{id:3,label:"技术文档",group:"document",color:{background:"#B1FFB1",border:"#41E041"}},{id:4,label:"门禁系统",group:"system",color:{background:"#97C2FC",border:"#2B7CE9"}},{id:5,label:"读卡器",group:"device",color:{background:"#FFB1B1",border:"#E04141"}}]};return o[r]||o.上海金融中心智能化项目}function w(r){return[{from:1,to:2,label:"控制",arrows:"to"},{from:2,to:3,label:"关联",arrows:"to"},{from:1,to:4,label:"监测",arrows:"to"},{from:1,to:5,label:"包含",arrows:"to"}]}function f(){console.log("Initializing project stats")}export{v as init};
