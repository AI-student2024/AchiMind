(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function c(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(o){if(o.ep)return;o.ep=!0;const n=c(o);fetch(o.href,n)}})();const S="modulepreload",L=function(e){return"/AchiMind/"+e},f={},P=function(t,c,i){let o=Promise.resolve();if(c&&c.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),a=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));o=Promise.allSettled(c.map(s=>{if(s=L(s),s in f)return;f[s]=!0;const l=s.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":S,l||(d.as="script"),d.crossOrigin="",d.href=s,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((y,w)=>{d.addEventListener("load",y),d.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${s}`)))})}))}function n(r){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=r,window.dispatchEvent(a),!a.defaultPrevented)throw r}return o.then(r=>{for(const a of r||[])a.status==="rejected"&&n(a.reason);return t().catch(n)})};let m=!1;document.addEventListener("DOMContentLoaded",async()=>{const e=document.getElementById("loading");try{if(m){e&&(e.style.display="none");return}e&&(e.style.display="flex");const[t,c]=await Promise.all([p("header","header.html"),p("footer","footer.html")]);if(!t||!c)throw new Error("Failed to load components");E(),q();const i=window.location.hash.slice(1)||"overview";await h(i),m=!0,e&&(e.style.display="none")}catch(t){console.error("Initialization error:",t),e&&(e.innerHTML=`
                <div class="text-center">
                    <div class="text-red-600 mb-4">
                        <i class="fas fa-exclamation-circle text-4xl"></i>
                    </div>
                    <p class="text-gray-600">加载失败，请刷新页面重试</p>
                    <p class="text-sm text-gray-500 mt-2">${t.message}</p>
                </div>
            `)}});async function p(e,t){try{const c=window.location.pathname.endsWith("/")?window.location.pathname:window.location.pathname+"/",i=await fetch(`${c}src/components/${t}`);if(!i.ok)throw new Error(`Failed to load component: ${t}`);const o=await i.text();return document.getElementById(e).innerHTML=o,!0}catch(c){return console.error(`Error loading component ${t}:`,c),!1}}async function h(e){console.log("Loading page:",e);try{document.querySelectorAll(".page").forEach(s=>{s.classList.add("page-hidden")});const t=window.location.pathname.endsWith("/")?window.location.pathname:window.location.pathname+"/",c=await fetch(`${t}src/pages/${e}.html`);if(!c.ok)throw new Error(`Failed to load page: ${e}`);const i=await c.text(),o=document.getElementById("content");o&&(o.innerHTML=i,o.classList.remove("page-hidden"),o.classList.add("page-transition"));const n=localStorage.getItem("selectedProject")||"上海金融中心智能化项目",r=v[n];if(e==="overview"&&r){const s=document.querySelector(".project-title");s&&(s.textContent=n);const l=document.querySelector(".project-info");l&&(l.innerHTML=`项目编号: ${r.id} | 竣工日期: ${r.completionDate}`);const u=document.querySelectorAll(".stat-card");u.length>=4&&(u[0].querySelector(".stat-value").textContent=r.documents.toLocaleString(),u[1].querySelector(".stat-value").textContent=r.nodes.toLocaleString(),u[2].querySelector(".stat-value").textContent=r.videos.toLocaleString(),u[3].querySelector(".stat-value").textContent=r.standards.toLocaleString())}const a=document.querySelector(".project-selector button span");a&&(a.textContent=n);try{const s=`${t}src/scripts/pages/${e}.js`;console.log("Loading script from:",s);const l=await import(s);console.log("Script loaded successfully"),l.init&&(e==="overview"?await l.init(!1,r):await l.init())}catch(s){console.warn(`No specific script found for ${e}:`,s),e==="overview"&&await initKnowledgeGraphPreview()}}catch(t){throw console.error(`Error loading page ${e}:`,t),t}}function E(){document.addEventListener("click",e=>{const t=e.target.closest(".nav-link");if(t){e.preventDefault();const c=t.getAttribute("data-page");j(c)}})}function j(e){console.log("Switching to page:",e),document.querySelectorAll(".nav-link").forEach(t=>{t.classList.remove("active"),t.getAttribute("data-page")===e&&t.classList.add("active")}),window.location.hash=e,h(e)}const v={上海金融中心智能化项目:{id:"SHFC-2023-001",completionDate:"2023-09-15",documents:1248,nodes:3756,videos:42,standards:87},北京中心大厦智能化项目:{id:"BJC-2023-002",completionDate:"2023-10-20",documents:1560,nodes:4200,videos:38,standards:92},广州城投大厦智能化项目:{id:"GZCT-2023-003",completionDate:"2023-11-15",documents:980,nodes:2800,videos:35,standards:75},深圳地铁大厦智能化项目:{id:"SZDT-2023-004",completionDate:"2023-12-10",documents:1350,nodes:3200,videos:45,standards:85}};function q(){const e=document.querySelector(".project-selector button"),t=document.querySelector(".project-selector .dropdown-menu"),c=e.querySelector("span");if(e&&t){const i=localStorage.getItem("selectedProject")||"上海金融中心智能化项目";c.textContent=i,g(i),e.addEventListener("click",()=>{t.classList.toggle("hidden")}),document.addEventListener("click",n=>{!e.contains(n.target)&&!t.contains(n.target)&&t.classList.add("hidden")}),t.querySelectorAll("a").forEach(n=>{n.addEventListener("click",r=>{r.preventDefault();const a=n.textContent.trim();c.textContent=a,t.classList.add("hidden"),g(a)})})}}function g(e){var i;console.log("Updating project content for:",e),localStorage.setItem("selectedProject",e);const t=v[e];if(!t)return;((i=document.querySelector(".nav-link.active"))==null?void 0:i.getAttribute("data-page"))==="overview"&&x(t)}function x(e){const t=localStorage.getItem("selectedProject"),c=document.querySelector(".project-title");c&&(c.textContent=t);const i=document.querySelector(".project-info");i&&(i.innerHTML=`项目编号: ${e.id} | 竣工日期: ${e.completionDate}`);const o=document.querySelectorAll(".stat-card");o.length>=4&&(o[0].querySelector(".stat-value").textContent=e.documents.toLocaleString(),o[1].querySelector(".stat-value").textContent=e.nodes.toLocaleString(),o[2].querySelector(".stat-value").textContent=e.videos.toLocaleString(),o[3].querySelector(".stat-value").textContent=e.standards.toLocaleString()),P(()=>import("../scripts/pages/overview.js?v="+new Date().getTime()),[]).then(n=>{n.init&&n.init(!0,e)})}
