(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function c(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(o){if(o.ep)return;o.ep=!0;const n=c(o);fetch(o.href,n)}})();const S="modulepreload",L=function(t){return"/AchiMind/"+t},f={},P=function(e,c,i){let o=Promise.resolve();if(c&&c.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),a=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));o=Promise.allSettled(c.map(s=>{if(s=L(s),s in f)return;f[s]=!0;const l=s.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":S,l||(d.as="script"),d.crossOrigin="",d.href=s,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((y,w)=>{d.addEventListener("load",y),d.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${s}`)))})}))}function n(r){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=r,window.dispatchEvent(a),!a.defaultPrevented)throw r}return o.then(r=>{for(const a of r||[])a.status==="rejected"&&n(a.reason);return e().catch(n)})};let m=!1;document.addEventListener("DOMContentLoaded",async()=>{const t=document.getElementById("loading");try{if(m){t&&(t.style.display="none");return}t&&(t.style.display="flex");const[e,c]=await Promise.all([p("header","header.html"),p("footer","footer.html")]);if(!e||!c)throw new Error("Failed to load components");E(),q();const i=window.location.hash.slice(1)||"overview";await h(i),m=!0,t&&(t.style.display="none")}catch(e){console.error("Initialization error:",e),t&&(t.innerHTML=`
                <div class="text-center">
                    <div class="text-red-600 mb-4">
                        <i class="fas fa-exclamation-circle text-4xl"></i>
                    </div>
                    <p class="text-gray-600">加载失败，请刷新页面重试</p>
                    <p class="text-sm text-gray-500 mt-2">${e.message}</p>
                </div>
            `)}});async function p(t,e){try{const c=window.location.pathname.endsWith("/")?window.location.pathname:window.location.pathname+"/",i=await fetch(`${c}src/components/${e}`);if(!i.ok)throw new Error(`Failed to load component: ${e}`);const o=await i.text();return document.getElementById(t).innerHTML=o,!0}catch(c){return console.error(`Error loading component ${e}:`,c),!1}}async function h(t){console.log("Loading page:",t);try{document.querySelectorAll(".page").forEach(s=>{s.classList.add("page-hidden")});const e=window.location.pathname.endsWith("/")?window.location.pathname:window.location.pathname+"/",c=await fetch(`${e}src/pages/${t}.html`);if(!c.ok)throw new Error(`Failed to load page: ${t}`);const i=await c.text(),o=document.getElementById("content");o&&(o.innerHTML=i,o.classList.remove("page-hidden"),o.classList.add("page-transition"));const n=localStorage.getItem("selectedProject")||"上海金融中心智能化项目",r=v[n];if(t==="overview"&&r){const s=document.querySelector(".project-title");s&&(s.textContent=n);const l=document.querySelector(".project-info");l&&(l.innerHTML=`项目编号: ${r.id} | 竣工日期: ${r.completionDate}`);const u=document.querySelectorAll(".stat-card");u.length>=4&&(u[0].querySelector(".stat-value").textContent=r.documents.toLocaleString(),u[1].querySelector(".stat-value").textContent=r.nodes.toLocaleString(),u[2].querySelector(".stat-value").textContent=r.videos.toLocaleString(),u[3].querySelector(".stat-value").textContent=r.standards.toLocaleString())}const a=document.querySelector(".project-selector button span");a&&(a.textContent=n);try{const l=await import(`${e}src/scripts/pages/${t}.js`+"?v="+new Date().getTime());console.log("Loaded script for:",t),l.init&&(t==="overview"?await l.init(!1,r):await l.init())}catch(s){console.warn(`No specific script found for ${t}:`,s)}}catch(e){throw console.error(`Error loading page ${t}:`,e),e}}function E(){document.addEventListener("click",t=>{const e=t.target.closest(".nav-link");if(e){t.preventDefault();const c=e.getAttribute("data-page");j(c)}})}function j(t){console.log("Switching to page:",t),document.querySelectorAll(".nav-link").forEach(e=>{e.classList.remove("active"),e.getAttribute("data-page")===t&&e.classList.add("active")}),window.location.hash=t,h(t)}const v={上海金融中心智能化项目:{id:"SHFC-2023-001",completionDate:"2023-09-15",documents:1248,nodes:3756,videos:42,standards:87},北京中心大厦智能化项目:{id:"BJC-2023-002",completionDate:"2023-10-20",documents:1560,nodes:4200,videos:38,standards:92},广州城投大厦智能化项目:{id:"GZCT-2023-003",completionDate:"2023-11-15",documents:980,nodes:2800,videos:35,standards:75},深圳地铁大厦智能化项目:{id:"SZDT-2023-004",completionDate:"2023-12-10",documents:1350,nodes:3200,videos:45,standards:85}};function q(){const t=document.querySelector(".project-selector button"),e=document.querySelector(".project-selector .dropdown-menu"),c=t.querySelector("span");if(t&&e){const i=localStorage.getItem("selectedProject")||"上海金融中心智能化项目";c.textContent=i,g(i),t.addEventListener("click",()=>{e.classList.toggle("hidden")}),document.addEventListener("click",n=>{!t.contains(n.target)&&!e.contains(n.target)&&e.classList.add("hidden")}),e.querySelectorAll("a").forEach(n=>{n.addEventListener("click",r=>{r.preventDefault();const a=n.textContent.trim();c.textContent=a,e.classList.add("hidden"),g(a)})})}}function g(t){var i;console.log("Updating project content for:",t),localStorage.setItem("selectedProject",t);const e=v[t];if(!e)return;((i=document.querySelector(".nav-link.active"))==null?void 0:i.getAttribute("data-page"))==="overview"&&x(e)}function x(t){const e=localStorage.getItem("selectedProject"),c=document.querySelector(".project-title");c&&(c.textContent=e);const i=document.querySelector(".project-info");i&&(i.innerHTML=`项目编号: ${t.id} | 竣工日期: ${t.completionDate}`);const o=document.querySelectorAll(".stat-card");o.length>=4&&(o[0].querySelector(".stat-value").textContent=t.documents.toLocaleString(),o[1].querySelector(".stat-value").textContent=t.nodes.toLocaleString(),o[2].querySelector(".stat-value").textContent=t.videos.toLocaleString(),o[3].querySelector(".stat-value").textContent=t.standards.toLocaleString()),P(()=>import("../scripts/pages/overview.js?v="+new Date().getTime()),[]).then(n=>{n.init&&n.init(!0,t)})}
